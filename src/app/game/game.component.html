<div class="game-container">
  <div class="top-container">
    <app-timer [timeLeft]="timeLeft"></app-timer>
  </div>
  <div class="opponents-container">
    <div class="opponent1-container">
      <ng-template [ngIf]="opponentTop">
        <app-avatar [player]="opponentTop"
                    [isCurrentPlayer]="isCurrentPlayer(opponentTop)"
                    avatarImageSrc="../../assets/avatar1.png">
        </app-avatar>
        <app-opponent [player]="opponentTop" class="rotated-180"
                      [showCards]="gameState.yaniv">
        </app-opponent>
      </ng-template>
    </div>
    <div class="opponents-center-container">
      <div class="opponent3-container opponent-side-container">
        <ng-template [ngIf]="opponentLeft">
          <div class="opponent2-avatar">
            <app-avatar [player]="opponentLeft"
                        [isCurrentPlayer]="isCurrentPlayer(opponentLeft)"
                        avatarImageSrc="../../assets/avatar2.png">
            </app-avatar>
          </div>
          <app-opponent [player]="opponentLeft" class="rotated-90"
                        [showCards]="gameState.yaniv">
          </app-opponent>
        </ng-template>
      </div>
      <div class="pile-deck-container">
        <div class="deck-container" *ngIf="gameState.deck?.length" (click)="makeMove()">
          <app-card *ngFor="let card of deckTopCards; let i = index"
                    [card]="card"
                    [isActive]="!gameState.gameIsOver &&  i === deckTopCards.length - 1 && gameState.currentPlayer?.id === player.id"
                    [flipped]="true"
                    class="deck-card"></app-card>
        </div>
        <div class="pile-container" *ngIf="thrownCards?.length">
          <app-card *ngFor="let card of thrownCards"
                    [card]="card" class="pile-card"
                    [isActive]="!gameState.gameIsOver && gameState.currentPlayer?.id === player.id"
                    (click)="makeMove(card)">
          </app-card>
        </div>
      </div>
      <div class="opponent3-container opponent-side-container">
        <ng-template [ngIf]="opponentRight">
          <div class="opponent3-avatar">
            <app-avatar [player]="opponentRight"
                        [isCurrentPlayer]="isCurrentPlayer(opponentRight)"
                        avatarImageSrc="../../assets/avatar3.png">
            </app-avatar>
          </div>
          <app-opponent [player]="opponentRight" class="rotated-270"
                        [showCards]="gameState.yaniv">
          </app-opponent>
        </ng-template>
      </div>
    </div>
    <div class="player-container">
      <app-player [player]="player"
                  [isCurrentPlayer]="gameState.currentPlayer?.id === player.id"
                  [yanivThreshold]="gameState.config.yanivThreshold"
                  (yanivClick)="onPlayerCallYaniv()">
      </app-player>
      <app-avatar [player]="player"
                  [isCurrentPlayer]="gameState.currentPlayer?.id === player.id"
                  avatarImageSrc="../../assets/avatar4.png">
      </app-avatar>
    </div>
  </div>
</div>
